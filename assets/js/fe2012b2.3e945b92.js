"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6751],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return p}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,c=e.originalType,l=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=d(n),p=o,f=m["".concat(l,".").concat(p)]||m[p]||u[p]||c;return n?r.createElement(f,a(a({ref:t},s),{},{components:n})):r.createElement(f,a({ref:t},s))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var c=n.length,a=new Array(c);a[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var d=2;d<c;d++)a[d]=n[d];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8211:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return p},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return u}});var r=n(7462),o=n(3366),c=(n(7294),n(3905)),a=["components"],i={description:"Tutorial on how to read the bytecode of a deployed smart contract with Go."},l="Reading Smart Contract Bytecode",d={unversionedId:"en/smart-contract-bytecode/README",id:"en/smart-contract-bytecode/README",title:"Reading Smart Contract Bytecode",description:"Tutorial on how to read the bytecode of a deployed smart contract with Go.",source:"@site/docs/en/smart-contract-bytecode/README.md",sourceDirName:"en/smart-contract-bytecode",slug:"/en/smart-contract-bytecode/",permalink:"/ethereum-development-with-go-book/docs/en/smart-contract-bytecode/",editUrl:"https://github.com/mhxw/ethereum-development-with-go-book/tree/dev/docs/en/smart-contract-bytecode/README.md",tags:[],version:"current",frontMatter:{description:"Tutorial on how to read the bytecode of a deployed smart contract with Go."},sidebar:"en",previous:{title:"Writing to a Smart Contract",permalink:"/ethereum-development-with-go-book/docs/en/smart-contract-write/"},next:{title:"Querying an ERC20 Token Smart Contract",permalink:"/ethereum-development-with-go-book/docs/en/smart-contract-read-erc20/"}},s={},u=[{value:"Full code",id:"full-code",level:3}],m={toc:u};function p(e){var t=e.components,n=(0,o.Z)(e,a);return(0,c.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,c.kt)("h1",{id:"reading-smart-contract-bytecode"},"Reading Smart Contract Bytecode"),(0,c.kt)("p",null,"Sometimes you'll need to read the bytecode of a deployed smart contract. Since all the smart contract bytecode lives on the blockchain, we can easily fetch it."),(0,c.kt)("p",null,"First set up the client and the smart contract address you want to read the bytecode of."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-go"},'client, err := ethclient.Dial("https://rinkeby.infura.io")\nif err != nil {\n  log.Fatal(err)\n}\n\ncontractAddress := common.HexToAddress("0x147B8eb97fD247D06C4006D269c90C1908Fb5D54")\n')),(0,c.kt)("p",null,"Now all you have to is call the ",(0,c.kt)("inlineCode",{parentName:"p"},"codeAt")," method of the client. The ",(0,c.kt)("inlineCode",{parentName:"p"},"codeAt")," method accepts a smart contract address and an optional block number, and returns the bytecode in bytes format."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-go"},"bytecode, err := client.CodeAt(context.Background(), contractAddress, nil) // nil is latest block\nif err != nil {\n  log.Fatal(err)\n}\n\nfmt.Println(hex.EncodeToString(bytecode)) // 60806...10029\n")),(0,c.kt)("p",null,"See the same bytecode hex on etherscan ",(0,c.kt)("a",{parentName:"p",href:"https://rinkeby.etherscan.io/address/0x147b8eb97fd247d06c4006d269c90c1908fb5d54#code"},"https://rinkeby.etherscan.io/address/0x147b8eb97fd247d06c4006d269c90c1908fb5d54#code")),(0,c.kt)("hr",null),(0,c.kt)("h3",{id:"full-code"},"Full code"),(0,c.kt)("p",null,(0,c.kt)("a",{parentName:"p",href:"https://github.com/mhxw/ethereum-development-with-go-book/blob/main/code/contract_bytecode.go"},"contract_bytecode.go")),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "context"\n    "encoding/hex"\n    "fmt"\n    "log"\n\n    "github.com/ethereum/go-ethereum/common"\n    "github.com/ethereum/go-ethereum/ethclient"\n)\n\nfunc main() {\n    client, err := ethclient.Dial("https://rinkeby.infura.io")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    contractAddress := common.HexToAddress("0x147B8eb97fD247D06C4006D269c90C1908Fb5D54")\n    bytecode, err := client.CodeAt(context.Background(), contractAddress, nil) // nil is latest block\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Println(hex.EncodeToString(bytecode)) // 60806...10029\n}\n')))}p.isMDXComponent=!0}}]);